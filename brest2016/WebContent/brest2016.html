<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="brest2016App">
    <head>
        <meta
            http-equiv="Content-Type"
            content="text/html; charset=UTF-8"
            >

        <title>Reservation de cr√©neaux pour Brest 2016</title>
        <link
            rel="stylesheet"
            type="text/css"
            href="styles/angular-growl.css"
            >
        <link
            rel="stylesheet"
            type="text/css"
            href="styles/animate.css"
            >
        <link
            rel="stylesheet"
            type="text/css"
            href="styles/bootstrap.css"
            >
        <link
            rel="stylesheet"
            type="text/css"
            href="styles/brest2016.css"
            >
        <link
            rel="stylesheet"
            type="text/css"
            href="styles/angular-material.css"
            >
        <script
            type="text/javascript"
            src="angular.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-animate.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-aria.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-messages.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-material.js"
        ></script>
        <!-- <script -->
        <!-- 	type="text/javascript" -->
        <!-- 	src="ui-bootstrap-tpls-1.1.2.js" -->
        <!-- ></script> -->
        <script
            type="text/javascript"
            src="angular-resource.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-spring-data-rest.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-growl.js"
        ></script>
        <script
            type="text/javascript"
            src="angular-sanitize.js"
        ></script>
        <script
            type="text/javascript"
            src="brest2016Module.js"
        ></script>
        <script
            type="text/javascript"
            src="brest2016Factory.js"
        ></script>
        <script
            type="text/javascript"
            src="Hateoas.js"
        ></script>
        <script
            type="text/javascript"
            src="brest2016Controller.js"
        ></script>
        <!-- ne sert plus !! -->
        <!-- <script -->
        <!-- 	type="text/javascript" -->
        <!-- 	src="autovivify.js" -->
        <!-- ></script> -->

    </head>


    <body
        ng-controller="Brest2016Controller as vm"
        layout="column"
        >

    <md-toolbar layout="row">
        <h1>Angular Material - Starter App</h1>
    </md-toolbar>
    <div
        flex
        layout="row"
        >


        <!-- Container #3 -->
        <md-sidenav
            md-is-locked-open="true"
            class="md-whiteframe-z2"
            > 
            <md-list> 
                <md-list-item>
                    <md-button ng-init="vm.ajouterStand = false" ng-click="vm.ajouterStand = !vm.ajouterStand">Ajouter un stand</md-button>
                </md-list-item>
                <md-list-item ng-repeat="stand in vm.hateoas.stands.list"> 
                    <md-button ng-init="stand.show=false"
                        ng-click="stand.show=!stand.show"
                        ng-class="{'selected' : stand.show }"
                        > {{stand.nom}}
                    </md-button>
                </md-list-item>                
            </md-list> 
        </md-sidenav>

        <md-content
            flex
            id="content"
            >
            <div growl></div>
            <h2>Content</h2>



            <div ng-show="vm.ajouterStand">
                <form
                    class="form-horizontal"
                    role="form"
                    name="create_stand_form"
                    ng-submit="stand_a_creer = vm.hateoas.stands.create(stand_a_creer)"
                    novalidate
                    >
                    <label class="control-label">Stand</label> <input
                        type="text"
                        name="nom_stand"
                        ng-model="stand_a_creer.nom"
                        ng-minlength="2"
                        /> <input
                        type="text"
                        name="descr_stand"
                        ng-model="stand_a_creer.descr"
                        />

                    <button
                        class="btn btn-primary"
                        ng-disabled="create_stand_form.$invalid"
                        >Add</button>
                </form>
            </div>

            <div ng-show="vm.hateoas.stands.list.length">
                liste des stands
                <div ng-repeat="stand in vm.hateoas.stands.list">
                    <div ng-show="stand.show">
                        <li>show: {{stand.show}} nom: {{stand.nom}} descr: {{stand.descr}} <span
                                remove-on-click
                                ng-click="vm.hateoas.stands.remove(stand)"
                                > supprimer </span> <span ng-repeat="horaire in vm.hateoas.horaires.list">
                                <label>{{horaire.plage}} <input
                                        type="checkbox"
                                        ng-model-options="{getterSetter: true}"
                                        ng-model="vm.hateoas.stands.getterSetterRelation(stand, horaire)"
                                        />
                                </label>
                            </span>
                        </li>
                    </div>
                </div>
            </div>

            <form
                class="form-horizontal"
                role="form"
                ng-submit="vm.hateoas.visiteurs.create('visiteur_a_creer')"
                ng-model-options="{getterSetter: true, updateOn: 'blur'}"
                >
                <label class="control-label">Visiteur</label> <input
                    type="text"
                    ng-model="vm.hateoas.visiteurs.getterSetter('visiteur_a_creer.prenom')"
                    /> <input
                    type="text"
                    ng-model="vm.hateoas.visiteurs.getterSetter('visiteur_a_creer.nom')"
                    />
                <button class="btn btn-primary">Add</button>
            </form>



            <div ng-show="vm.hateoas.visiteurs.list.length">
                liste des visiteurs
                <div ng-repeat="visiteur in vm.hateoas.visiteurs.list">
                    <li>{{visiteur.prenom}} {{visiteur.nom}} <span
                            remove-on-click
                            ng-click="vm.hateoas.visiteurs.remove(visiteur)"
                            > supprimer </span> <span
                            ng_click="activites = vm.hateoas.visiteurs.getRelations(visiteur, 'activite')"
                            >activite</span>
                        <div ng-repeat="activite in activites">{{activite}}</div>
                    </li>
                </div>
            </div>



            <form
                class="form-horizontal"
                role="form"
                ng-submit="vm.hateoas.visiteurs.addRelation(visiteur, activite)"
                >
                <select
                    ng-model="visiteur"
                    ng-options="visiteur.prenom for visiteur in vm.hateoas.visiteurs.list"
                    ></select>
                <select
                    ng-model="activite"
                    ng-options="activite for activite in vm.hateoas.activites.list"
                    ></select>
                </select>
                <button class="btn btn-primary">Inscrire</button>
            </form>
        </md-content>
    </div>
</body>
</html>

